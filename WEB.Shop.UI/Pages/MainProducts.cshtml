@page
@model MainProductsModel
@{
    ViewData["Title"] = "Home page";
}

<div>
    <form method="post">
        <div>
            <div>
                <input class="input" asp-for="@Model.SearchString" type="text" placeholder="Nazwa produktu...">
            </div>

            <select name="SelectedShop">
                <option value="All">Wszystkie Sklepy</option>

                @foreach (var shop in Model.Shops)
                {
                    <option value="@shop">@shop</option>
                }
            </select>
            <div>
                <button type="submit">
                    Szukaj
                </button>
            </div>
        </div>
    </form>

    <div class="block">
        <nav class="pagination is-rounded">
            <ul class="pagination-list">
                @if (Model.ShowFirst)
                {
                    <li>
                        <a asp-page="/MainProducts" asp-route-CurrentPage="1" class="pagination-link">Początek</a>
                    </li>
                }

                @if (Model.ShowPrevious)
                {
                    <li>
                        <a asp-page="/MainProducts" asp-route-CurrentPage="@(Model.CurrentPage -1)" class="pagination-link">Poprzednia Strona</a>
                    </li>
                }

                @if (Model.ShowNext)
                {
                    <li>
                        <a asp-page="/MainProducts" asp-route-CurrentPage="@(Model.CurrentPage + 1)" class="pagination-link">Następna Strona</a>
                    </li>
                }

                @if (Model.ShowLast)
                {
                    <li>
                        <a asp-page="/MainProducts" asp-route-CurrentPage="@(Model.TotalPages)" class="pagination-link">Koniec</a>
                    </li>
                }
            </ul>
        </nav>
    </div>

    <!-- <div class="container">
            <div class="row">
                @foreach (var p in Model.Products)
                {
                    <div class="col-md-3" style="height: 250px;">
                        <a asp-page="Product" asp-route-name="@p.Name.Replace(" ","-")">
                            <div class="card mh-100" >
                                <div class="card mb-2"  >
                                    <div class="card-body">
                                        @{
                                            string cssClass = "";
                                            string message = "";

                                            if (!string.IsNullOrEmpty(p.Description) && p.Description.Contains(" !PROMOCJA! "))
                                            {
                                                cssClass = "is-warning";
                                                message = " PROMOCJA! ";
                                            }
                                        }
                                        @if (!string.IsNullOrEmpty(p.Description))
                                        {
                                            <div class="card-text @cssClass">
                                                @message
                                            </div>
                                        }
                                        <p class="card-title">
                                            @p.Name
                                            <br />
                                        </p>
                                        <p class="card-subtitle mb-2 text-muted">
                                            @p.Value
                                        </p>
                                        <p class="card-title">
                                            @p.Description
                                        </p>
                                        <p class="card-title">
                                            @p.Seller
                                        </p>
                                        <p class="card-footer">
                                            <small class="text-muted">
                                                @p.TimeStamp.ToString("yyyy/MM/dd HH:mm")
                                            </small>
                                        </p>
                                    </div>

                                </div>
                            </div>
                        </a>
                    </div>
                }
            </div>
        </div>
    </div>
    -->
    <div class="container">

        @foreach (var p in Model.Products)
        {
            <div class="card-deck">
                <div class="card">
                    <a asp-page="Product" asp-route-name="@p.Name.Replace(" ", "-")">
                        <div class="card-body">
                            @{
                                string cssClass = "";
                                string message = "";

                                if (!string.IsNullOrEmpty(p.Description) && p.Description.Contains(" !PROMOCJA! "))
                                {
                                    cssClass = "is-warning";
                                    message = " PROMOCJA! ";
                                }
                            }
                            @if (!string.IsNullOrEmpty(p.Description))
                            {

                                <p class="card-text" @cssClass>
                                    @message
                                </p>
                                <h5 class="card-title">
                                    @p.Name
                                    <br />
                                </h5>
                                <p class="card-subtitle mb-2 text-muted">
                                    @p.Value
                                </p>
                                <p class="card-title">
                                    @p.Description
                                </p>
                                <p class="card-title">
                                    @p.Seller
                                </p>

                                <div class="card-footer">
                                    <small class="text-muted">
                                        @p.TimeStamp.ToString("yyyy/MM/dd HH:mm")
                                    </small>
                                </div>
                            }
                        </div>
                    </a>
                </div>
            </div>
        }
    </div>

<!--
    <div class="card">
        <img src="..." class="card-img-top" alt="...">
        <div class="card-body">
            <h5 class="card-title">Card title</h5>
            <p class="card-text">This card has supporting text below as a natural lead-in to additional content.</p>
        </div>
        <div class="card-footer">
            <small class="text-muted">Last updated 3 mins ago</small>
        </div>
    </div>
    <div class="card">
        <img src="..." class="card-img-top" alt="...">
        <div class="card-body">
            <h5 class="card-title">Card title</h5>
            <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This card has even longer content than the first to show that equal height action.</p>
        </div>
        <div class="card-footer">
            <small class="text-muted">Last updated 3 mins ago</small>
        </div>
    </div>
</div>
-->
